---
layout: post
title: "처음 겪은 마이그레이션 전략-intro"
description: 처음 있었던 서비스 인수인계, 도메인 URL을 활용해서 마이그레이션 작업을 수행하다
image: 'https://i.imgur.com/EKnqkCJ.png'
category: 'startup'
twitter_text: 처음 겪은 서비스 인수인계(마이그레이션)
introduction: 인수인계 받을 서비스의 인스턴스에는 직접적으로 제어할 수 없고, 쓸 수 있는건 소스코드와 그 당시 작업 했던 사람. 설정코드는 공백이며, 깃 로그 또한 없다. 이 때 초급 개발자가 선택한 마이그레이션 전략.
---



# 2. 서드파티, 및 서비스 권한 획득

1. Apple Store에 올라가 있는 서비스 양도 받기
2. Play Store에 올라가 있는 서비스 양도 받기
    - 루트계정(어드민) 이것이 즉 개발자 계정임 이 계정으로 받아야 한다.
3. 페이스북 
    - 대쉬보드에 관리자 권한으로 부여할 사람 초대하고 부여한 사람이 나가면 양도 끝
4. 구글 애널리틱스
    - 관리->사용자관리 에서 관리자 권한으로 부여할 사람 초대하고 부여한 사람이 나가면 양도 끝
5. 파이어베이스, API dashboard(Google Login 및 GCM 포함)
    - 관리->사용자관리 에서 관리자 권한으로 부여할 사람 초대하고 부여한 사람이 나가면 양도 
6. 샌드버드
    - 고객지원과 통화하며 ... api키를 그대로 쓰는 상태로 API의 권한을 받고싶다.. 라고 컨택해야함. 샌드버드 특성상 본사가 실리콘벨리에있어 작업 처리에 조금 늦는 감이 있다. 

7. SMS(SKTelink)
8. Kakao Message(BizTalk) 
    - 7번과 8번은 여러 서류가 필요한데.... 상담사분깨 대놓고 신입 커밍아웃했다. 상담사분이 뭐가 필요한지 알려주는데 하나도 못알아 들었다. 그래서 결국.
    
    > "저 개발자이며 이 쪽 분야에 대해 하나도 모릅니다. 하지만 필요하신 문서가 뭔지 알려주시면 스스로 검색해서 찾아보도록 하겠습니다. 그 문서들은 어떻게 준비 하면 되나요?....."


**\*\* 위 작업에 중요한 점:** 안드로이드, iOS 배포를 새로 하지 않으려고 권한을 받으려고 하는것. 안드로이드, iOS 를 .. 새로 배포하게 될 경우... 이전에 바라보던 서버와, 새로 바라보는 서버. 두개를 켜야하는데.. 이전에 바라보던 서버를 제어하지 못하는 상황이므로.. 위 방법은 위험하고 여러 불편함을 감내 해야한다는 생각을 하게됨

**\*\* 7,8 항목에서 중요한 점:** 이 두 서드파티 회사들은 2개의 장비에서 하나의 발급받은 ID를 사용하지 못하기 때문에 인수인계가 끝나자마자 **이전에 사용하고 있던 장비(서버)가 접근을 하지 못하도록 Agent프로그램의 접근을 막아버린다.** 

- 비즈톡에서는 기존에 쓰던 ip주소를 지우고, 새로 말씀드린 ip 주소로 바꿔버려서 이전에 사용하던 API서버의 BizTalk Agent프로그램이 죽었었다. 이 때에는 화이트 리스트에 "추가" 해달라 해야한다. "대체"가 아니라..

- SKtelink에서는 인수인계 작업이 끝나면서 기존에 사용하던 번호를 제거시켜버렸다.
발신자 번호를 항상 넣어주어야 하는데, 발신자 번호가 사라지게 되면서 SkTelink의 Agent프로그램이 또 사망했다.


**즉.. 마이그레이션 작업 3일 남기고 두 서버가 제 기능을 못하고 죽어버리게 되었다.**

이 사실을 전혀 인지하지 못하다가 고객 피드백을 받고서야 알았다.

> 정말 멘탈이 나가버리는줄 알았다.




# 작업 순서[링크]

0. 마이그레이션 인트로 [Link]({{ site.baseurl }}/처음_겪은_서비스_마이그레이션_작업-intro)
1. 전해들은 정보들을 토대로 아키텍쳐 파악 [Link]({{ site.baseurl }}/처음_겪은_서비스_마이그레이션_작업-1)
2. 서드파티(facebook login, google analytics, firebase, playstore, android player... 등등.. 또는 sms, kakao BizMsg .. 등등 약 9개 정도 된 듯) 권한 및 계정 가져오기 [Link]({{ site.baseurl }}/처음_겪은_서비스_마이그레이션_작업-2)
3. 운영 서버 설계 [Link]({{ site.baseurl }}/처음_겪은_서비스_마이그레이션_작업-3)
4. 마이그레이션 전략 구상 [Link]({{ site.baseurl }}/처음_겪은_서비스_마이그레이션_작업-4)
5. 테스트 환경 구축 [Link]({{ site.baseurl }}/처음_겪은_서비스_마이그레이션_작업-5)
6. 마이그레이션 [Link]({{ site.baseurl }}/처음_겪은_서비스_마이그레이션_작업-6)
7. 운영 서버 배포 [Link]({{ site.baseurl }}/처음_겪은_서비스_마이그레이션_작업-7)
8. 후속작업... [Link]({{ site.baseurl }}/처음_겪은_서비스_마이그레이션_작업-8)

-----

Want to see something else added? <a href="https://github.com/poole/poole/issues/new">Open an issue.</a>
